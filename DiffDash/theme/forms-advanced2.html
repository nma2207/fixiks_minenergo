<!doctype html>
<html lang="en">

<head>
	<title>Advanced Form Elements | DiffDash - Free Admin Template</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link rel="import" href="http://localhost/krd_svg.html">
	<!-- VENDOR CSS -->
	<link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/vendor/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="assets/vendor/linearicons/style.css">
	<link rel="stylesheet" href="assets/vendor/metisMenu/metisMenu.css">
	<link rel="stylesheet" href="assets/vendor/bootstrap-multiselect/bootstrap-multiselect.css">
	<link rel="stylesheet" href="assets/vendor/bootstrap-datepicker/css/bootstrap-datepicker3.min.css">
	<!-- MAIN CSS -->
	<link rel="stylesheet" href="assets/css/main.css">
	<!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
	<link rel="stylesheet" href="assets/css/demo.css">
	<!-- GOOGLE FONTS -->
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
	<!-- ICONS -->
	<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
	<link rel="icon" type="image/png" sizes="96x96" href="assets/img/favicon.png">
	<!-- <script src="js/gettext.js"></script> -->
</head>

<body>
	<!-- WRAPPER -->
	<div id="wrapper">
		<!-- NAVBAR -->
		<nav class="navbar navbar-default navbar-fixed-top">
			<div class="container-fluid">
				<div class="navbar-btn">
					<button type="button" class="btn-toggle-offcanvas"><i class="lnr lnr-menu"></i></button>
				</div>
				<!-- logo -->
				<div class="navbar-brand">
					<a href="index.html"><img src="assets/img/logo.png" alt="DiffDash Logo" class="img-responsive logo"></a>
				</div>
				<!-- end logo -->
				<div class="navbar-right">
					<!-- search form -->
					<form id="navbar-search" class="navbar-form search-form">
						<input value="" class="form-control" placeholder="Search here..." type="text">
						<button type="button" class="btn btn-default"><i class="fa fa-search"></i></button>
					</form>
					<!-- end search form -->
					<!-- navbar menu -->
					<div id="navbar-menu">
						<ul class="nav navbar-nav">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle icon-menu" data-toggle="dropdown">
									<i class="lnr lnr-alarm"></i>
									<span class="notification-dot"></span>
								</a>
								<ul class="dropdown-menu notifications">
									<li class="header"><strong>You have 7 new notifications</strong></li>
									<li>
										<a href="#">
											<div class="media">
												<div class="media-left">
													<i class="fa fa-fw fa-flag-checkered text-muted"></i>
												</div>
												<div class="media-body">
													<p class="text">Your campaign <strong>Holiday Sale</strong> is starting to engage potential customers.</p>
													<span class="timestamp">24 minutes ago</span>
												</div>
											</div>
										</a>
									</li>
									<li>
										<a href="#">
											<div class="media">
												<div class="media-left">
													<i class="fa fa-fw fa-exclamation-triangle text-warning"></i>
												</div>
												<div class="media-body">
													<p class="text">Campaign <strong>Holiday Sale</strong> is nearly reach budget limit.</p>
													<span class="timestamp">2 hours ago</span>
												</div>
											</div>
										</a>
									</li>
									<li>
										<a href="#">
											<div class="media">
												<div class="media-left">
													<i class="fa fa-fw fa-bar-chart text-muted"></i>
												</div>
												<div class="media-body">
													<p class="text">Website visits from Facebook is 27% higher than last week.</p>
													<span class="timestamp">Yesterday</span>
												</div>
											</div>
										</a>
									</li>
									<li>
										<a href="#">
											<div class="media">
												<div class="media-left">
													<i class="fa fa-fw fa-check-circle text-success"></i>
												</div>
												<div class="media-body">
													<p class="text">Your campaign <strong>Holiday Sale</strong> is approved.</p>
													<span class="timestamp">2 days ago</span>
												</div>
											</div>
										</a>
									</li>
									<li>
										<a href="#">
											<div class="media">
												<div class="media-left">
													<i class="fa fa-fw fa-exclamation-circle text-danger"></i>
												</div>
												<div class="media-body">
													<p class="text">Error on website analytics configurations</p>
													<span class="timestamp">3 days ago</span>
												</div>
											</div>
										</a>
									</li>
									<li class="footer"><a href="#" class="more">See all notifications</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle icon-menu" data-toggle="dropdown">
									<i class="lnr lnr-cog"></i>
								</a>
								<ul class="dropdown-menu user-menu menu-icon">
									<li class="menu-heading">ACCOUNT SETTINGS</li>
									<li><a href="#"><i class="fa fa-fw fa-edit"></i> <span>Basic</span></a></li>
									<li><a href="#"><i class="fa fa-fw fa-bell"></i> <span>Notifications</span></a></li>
									<li><a href="#"><i class="fa fa-fw fa-sliders"></i> <span>Preferences</span></a></li>
									<li><a href="#"><i class="fa fa-fw fa-lock"></i> <span>Privacy</span></a></li>
									<li class="menu-heading">BILLING</li>
									<li><a href="#"><i class="fa fa-fw fa-file-text-o"></i> <span>Invoices</span></a></li>
									<li><a href="#"><i class="fa fa-fw fa-credit-card"></i> <span>Payments</span></a></li>
									<li><a href="#"><i class="fa fa-fw fa-refresh"></i> <span>Renewals</span></a></li>
									<li class="menu-button">
										<a href="#" class="btn btn-primary"><i class="fa fa-rocket"></i> UPGRADE PLAN</a>
									</li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle icon-menu" data-toggle="dropdown">
									<i class="lnr lnr-question-circle"></i>
								</a>
								<ul class="dropdown-menu user-menu">
									<li>
										<form class="search-form help-search-form">
											<input value="" class="form-control" placeholder="How can we help?" type="text">
											<button type="button" class="btn btn-default"><i class="fa fa-search"></i></button>
										</form>
									</li>
									<li class="menu-heading">HOW-TO</li>
									<li><a href="#">Setting up Campaign</a></li>
									<li><a href="#">Understanding Website Analytics</a></li>
									<li><a href="#">Boost Your Sales</a></li>
									<li><a href="#">Knowing Your Audience</a></li>
									<li class="menu-heading">ACCOUNT</li>
									<li><a href="#">Change Password</a></li>
									<li><a href="#">Privacy &amp; Security</a></li>
									<li><a href="#">Membership</a></li>
									<li class="menu-heading">BILLING</li>
									<li><a href="#">Setup Payment</a></li>
									<li><a href="#">Auto-Renewal Program</a></li>
									<li><a href="#">Cancellation</a></li>
									<li class="menu-button">
										<a href="#" class="btn btn-primary"><i class="fa fa-question-circle"></i> HELP CENTER</a>
									</li>
								</ul>
							</li>
						</ul>
					</div>
					<!-- end navbar menu -->
				</div>
			</div>
		</nav>
		<!-- END NAVBAR -->
		<!-- LEFT SIDEBAR -->
		<div id="left-sidebar" class="sidebar">
			<button type="button" class="btn btn-xs btn-link btn-toggle-fullwidth">
				<span class="sr-only">Toggle Fullwidth</span>
				<i class="fa fa-angle-left"></i>
			</button>
			<div class="sidebar-scroll">
				
				<nav id="left-sidebar-nav" class="sidebar-nav">
					<ul id="main-menu" class="metismenu">
						<li class=""><a href="index.html"><i class="lnr lnr-home"></i> <span>Dashboard</span></a></li>
						<li class="">
							<a href="#uiElements" class="has-arrow" aria-expanded="false"><i class="lnr lnr-magic-wand"></i> <span>UI Elements</span></a>
							<ul aria-expanded="true">
								<li class=""><a href="ui-tabs.html">Tabs</a></li>
								<li class=""><a href="ui-buttons.html">Buttons</a></li>
								<li class=""><a href="ui-bootstrap.html">Bootstrap UI</a></li>
								<li class=""><a href="ui-icons.html"><span>Icons</span></a></li>
							</ul>
						</li>
						<li class="">
							<a href="#subPages" class="has-arrow" aria-expanded="false"><i class="lnr lnr-file-empty"></i> <span>Pages</span></a>
							<ul aria-expanded="true">
								<li class=""><a href="page-profile.html">User Profile</a></li>
								<li class=""><a href="page-login.html">Login</a></li>
								<li class=""><a href="page-register.html">Register</a></li>
								<li class=""><a href="page-lockscreen.html">Lockscreen</a></li>
								<li class=""><a href="page-forgot-password.html">Forgot Password</a></li>
								<li class=""><a href="page-404.html">Page 404</a></li>
								<li class=""><a href="page-500.html">Page 500</a></li>
							</ul>
						</li>
						<li class="active">
							<a href="#forms" class="has-arrow" aria-expanded="true"><i class="lnr lnr-pencil"></i> <span>Forms</span></a>
							<ul aria-expanded="true">
								<li class=""><a href="forms-validation.html">Form Validation</a></li>
								<li class="active"><a href="forms-advanced.html">Advanced Form Elements</a></li>
								<li class=""><a href="forms-basic.html">Basic Form Elements</a></li>
								<li class=""><a href="forms-dragdropupload.html">Drag &amp; Drop Upload</a></li>
								<li class=""><a href="forms-texteditor.html">Text Editor</a></li>
							</ul>
						</li>
						<li class="">
							<a href="#charts" class="has-arrow" aria-expanded="false"><i class="lnr lnr-chart-bars"></i> <span>Charts</span></a>
							<ul aria-expanded="true">
								<li class=""><a href="charts-chartist.html">Chartist</a></li>
								<li class=""><a href="charts-sparkline.html">Sparkline Chart</a></li>
							</ul>
						</li>
						<li class=""><a href="notifications.html"><i class="lnr lnr-alarm"></i> <span>Notifications</span> <span class="badge bg-danger">1</span></a></li>
						<li class=""><a href="typography.html"><i class="lnr lnr-text-format"></i> <span>Typography</span></a></li>
					</ul>
				</nav>
				
			</div>
		</div>
		<!-- END LEFT SIDEBAR -->
		<!-- MAIN CONTENT -->
		<div id="main-content">
				<div class="container-fluid">
					<div class="section-heading">
						<h1 class="page-title" id="textReg"></h1>
					</div>

				</div>








<!-- <div id = "con"></div> -->

<script>
	var reg = localStorage.getItem("region"); 
	console.log(reg)
	if(reg=="RU-KDA"){

		
		var link = document.querySelector('link[rel=import]');
	// 	var content = link.import.querySelector('#visual');
	// 	link.import.
    //   document.body.appendChild(content.cloneNode(true));
	}
</script>
				


					<div class="col-md-10" >
						<!-- BASIC TABS COLORED -->
						<ul class="nav nav-tabs nav-tabs-colored" role="tablist" >
							<li class="active" ><a href="#home" role="tab" data-toggle="tab" id="WARN" style="background-color: #FFC0CB"></a></</li>
						</ul>
						<div class="tab-content tab-content-colored" id = "panERR" style="background-color:#FFC0CB">
							<div class="tab-pane fade in active" id="home">
								<h4 id="warR"></h4>
								<p id ="descr"></p>
							</div>
						</div>
						<!-- END BASIC TABS COLORED -->
						<div class="margin-bottom-50"></div>
					</div>

				
					<div class="row">
						<div class="col-md-5">
							<div class="panel-content">
					
									<table class="table table-hover" id = "tableObjects">
										<thead>
										  <tr>
											<th>Объект</th>
											<th>Местоположение</th>
											
										  </tr>
										</thead>
										
									  </table>
							</div>
						</div>
						<div class="col-md-5">
							<div class="panel-content">
									<table class="table table-hover"  id = "tableParams">
										<thead>
										  <tr>
											<th>Сведения</th>
											<th>Значение</th>
											
										  </tr>
										</thead>
										
									  </table>
							</div>
						</div>
					</div>



					


		</div>
	
		
		</div>
		<!-- END MAIN CONTENT -->
		<div class="clearfix"></div>
		<!-- <footer>
			<p class="copyright">&copy; 2017 <a href="https://www.themeineed.com" target="_blank">Theme I Need</a>. All Rights Reserved.</p>
		</footer> -->
	</div>
	<!-- END WRAPPER -->
	<!-- Javascript -->
	<script>
		var cashMap = new Map()
		var reg = localStorage.getItem("region"); 
		var elReg =document.getElementById("textReg")
		var tab2 = document.getElementById("tableParams");

		function clear(){
		var rows =	tab2.getElementsByTagName('tr')
		// console.log("Kol: " + rows.length);
	for(var j=1; j<rows.length; j++){
		// console.log(j);
		tab2.deleteRow(j);
		clear();
		}
			
		}





		fetch('http://127.0.0.1:5000/weather/'+reg +'/'+ dateP).then(function(response){
				if(response.status!==200){   
 			 console.log(response.status);
 	 		return;
			}
				response.json().then(function(data) {
					var  fire_proba = data['fire_proba']
					var  ice_proba = data['ice_proba']
					var  norm_proba = data['norm_proba']
					var  tree_fall_proba = data['tree_fall_proba']
					var  temp = data['temp']
					var  speed = data['speeding']
					if(parseInt(fire_proba)>=25){document.getElementById("descr").innerText = "Возможен пожар. Вероятность возникновения: "+ fire_proba+"%";
					document.getElementById("warR").innerText= "Внимание!!!"}
					if(parseInt(ice_proba)>=25){document.getElementById("descr").innerText = "Возможен гололед. Вероятность возникновения: "+ ice_proba+"%";
					document.getElementById("warR").innerText = "Внимание!!!"}
					if(parseInt(tree_fall_proba)>=25){document.getElementById("descr").innerText = "Возможен сильный ветер. Вероятность возникновения: "+ tree_fall_proba+"%";
					document.getElementById("warR").innerText = "Внимание!!!"}
					if(!parseInt(fire_proba)>=25 && !parseInt(ice_proba)>=25 && !parseInt(tree_fall_proba)>=25){document.getElementById("panERR")}
					var newRow=tab2.insertRow(1);
			var newCell1 = newRow.insertCell(0);
			var newCell2 = newRow.insertCell(1);
			newCell1.innerText = "Вероятность пожара";
			newCell2.innerText = fire_proba;


			var newRow=tab2.insertRow(2);
			var newCell1 = newRow.insertCell(0);
			var newCell2 = newRow.insertCell(1);
			newCell1.innerText = "Вероятность гололеда";
			newCell2.innerText = ice_proba;


			var newRow=tab2.insertRow(3);
			var newCell1 = newRow.insertCell(0);
			var newCell2 = newRow.insertCell(1);
			newCell1.innerText = "Вероятность сильного ветра";
			newCell2.innerText = tree_fall_proba;

			var newRow=tab2.insertRow(4);
			var newCell1 = newRow.insertCell(0);
			var newCell2 = newRow.insertCell(1);
			newCell1.innerText = "Температура";
			newCell2.innerText =  temp;

			var newRow=tab2.insertRow(4);
			var newCell1 = newRow.insertCell(0);
			var newCell2 = newRow.insertCell(1);
			newCell1.innerText = "Скорость ветра";
			newCell2.innerText =  speed ;


				})

			})



		//  function handler(p1,p2,id){
			clear();
			
			 var map = cashMap[id];


			
			
			// for(var i=0; i<2;i++){
						// console.log(data[i]);
			
			// var newRow=tab2.insertRow(1);
			// var newCell1 = newRow.insertCell(0);
			// var newCell2 = newRow.insertCell(1);
			// newCell1.innerText = "Температура °C";
			// newCell2.innerText = map["temp"];


			// var newRow=tab2.insertRow(2);
			// var newCell1 = newRow.insertCell(0);
			// var newCell2 = newRow.insertCell(1);
			// newCell1.innerText = "Скорость воздуха м/с";
			// newCell2.innerText = map["speed"];

					//  }
			
			// fetch('http://127.0.0.1:5000/par/'+id).then(function(response){
			// 	if(response.status!==200){   
 			// 		 console.log(response.status);
 			//  	return;
			// }
			// 	response.json().then(function(data){
			// 		//  console.log(data);
			// 		 for(var i=0; i<data.length;i++){
			// 			console.log(data[i]);
			
			// var newRow=tab2.insertRow(i+1);
			// var newCell1 = newRow.insertCell(0);
			// var newCell2 = newRow.insertCell(1);
			// newCell1.innerText = data[i].par1;
			// newCell2.innerText = data[i].par2;
			// 		 }
				
			// 	})

			// })
		
//   }
 var dateP = localStorage.getItem("date"); 	
fetch('http://127.0.0.1:5000/reg/'+reg +'/'+ dateP).then(function(response){
	if(response.status!==200){   
 		 console.log(response.status);
 	 return;
}


response.json().then(function(data) {  
	console.log(data)
	var tab1 = document.getElementById("tableObjects");
	var war = document.getElementById("WARN")
	var des = document.getElementById("descr")
	war.innerText= data['Event']
	console.log(data['Event'])
	des.innerText=data["Description"]
		var region= data['Region'];
		var par = data["Objects"]
		// cashMap[data["id"]] = {"temp": par["temp"], "speed":par["speed"]}	
		// console.log(data["id"])
	
		for(var i=0; i<par.length; i++ ){
			// console.log(par[i].temp)
			// console.log(par[i].speed)
			 cashMap[par[i].id] = {"temp": par[i].temp, "speed":par[i].speed}
			var newRow=tab1.insertRow(i+1);
    		var newCell1 = newRow.insertCell(0);
			var newCell2 = newRow.insertCell(1);
			newRow.setAttribute('id', par[i].p1);
			newRow.setAttribute('class', "par");
			// newCell1.setAttribute('id', par[i].p1);
			newCell1.innerText = par[i].p1
			newCell2.innerText = par[i].p2
			 newRow.onclick = handler.bind(null, par[i].p1,par[i].p2,par[i].id)	
		}
		elReg.innerText = region
		
	

  })

})




</script>

<script src="assets/vendor/jquery/jquery.min.js"></script>
	<script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="assets/vendor/metisMenu/metisMenu.js"></script>
	<script src="assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
	<script src="assets/vendor/bootstrap-multiselect/bootstrap-multiselect.js"></script>
	<script src="assets/vendor/jquery.maskedinput/jquery.maskedinput.min.js"></script>
	<script src="assets/vendor/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
	<script src="assets/scripts/common.js"></script>
<script>

// jQuery.ajax({
// url: "http://localhost/krd_svg.html",
// dataType: "html",
// success: function(response) {
// 	 console.log(document.getElementById('#con').innerHTML)
// document.getElementById('#con').innerHTML = response;
// }
// });

// fetch('http://localhost/krd_svg.html').then(function(response){
// 	console.log(response.text )
// })
</script>
	
	<script>
// $('#tableObjects').ready(function(){$('th').bind('click',function(e){console.log($('th'))})});


	$(function() {

		// Masked Inputs
		$('#phone').mask('(999) 999-9999');
		$('#phone-ex').mask('(999) 999-9999? x99999');
		$('#tax-id').mask('99-9999999');
		$('#ssn').mask('999-99-9999');
		$('#product-key').mask('a*-999-a999');


		// Multiselect
		$('#multiselect1, #multiselect2, #single-selection, #multiselect5, #multiselect6').multiselect({
			maxHeight: 300
		});

		$('#multiselect3-all').multiselect({
			includeSelectAllOption: true,
		});

		$('#multiselect4-filter').multiselect({
			enableFiltering: true,
			enableCaseInsensitiveFiltering: true,
			maxHeight: 200
		});

		$('#multiselect-size').multiselect({
			buttonClass: 'btn btn-default btn-sm'
		});

		$('#multiselect-link').multiselect({
			buttonClass: 'btn btn-link'
		});

		$('#multiselect-color').multiselect({
			buttonClass: 'btn btn-primary'
		});

		$('#multiselect-color2').multiselect({
			buttonClass: 'btn btn-success'
		});


		// Date picker
		$('.inline-datepicker').datepicker({
			todayHighlight: true
		});

	});

	
	</script>
	
</body>

</html>
